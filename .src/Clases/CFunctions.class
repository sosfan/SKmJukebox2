' Gambas class file

Private DataControl As New CData
Private $CMain As CMMain
Private NumberPos As Integer
Property Skm_Modo As String
Property Volumen As Integer ''Establece o retorna el valor de volumen.

Public Sub _new()
  
  Dim SkinTheme As Settings
  DataControl.Skm_Modo = "Musica"
  SkinTheme = New Settings(DataControl.SkinPath & DataControl.SkinTheme &/ "theme.conf")
  NumberPos = 1
  $CMain = New CMMain(FMain)
  $CMain.H = SkinTheme["Window/H"]
  $CMain.W = SkinTheme["Window/W"]
  $CMain.X = 0
  $CMain.Y = 0
  $CMain.Skm_Modo = DataControl.Skm_Modo
  $CMain.NumberPos = NumberPos
  
End

' Public Procedure Equalization() 
'   
'   Dim EQdata As New Integer[]
'   
'   EQdata = DataControl.channels
'   
'   Shell "amixer -q -D equal set \"01. 31 Hz\" " & EQdata[0] & "%"
'   Shell "amixer -q -D equal set \"02. 63 Hz\" " & EQdata[1] & "%"
'   Shell "amixer -q -D equal set \"03. 125 Hz\" " & EQdata[2] & "%"
'   Shell "amixer -q -D equal set \"04. 250 Hz\" " & EQdata[3] & "%"
'   Shell "amixer -q -D equal set \"05. 500 Hz\" " & EQdata[4] & "%"
'   Shell "amixer -q -D equal set \"06. 1 kHz\" " & EQdata[5] & "%"
'   Shell "amixer -q -D equal set \"07. 2 kHz\" " & EQdata[6] & "%"
'   Shell "amixer -q -D equal set \"08. 4 kHz\" " & EQdata[7] & "%"
'   Shell "amixer -q -D equal set \"09. 8 kHz\" " & EQdata[8] & "%"
'   Shell "amixer -q -D equal set \"10. 16 kHz\" " & EQdata[9] & "%"
' 
'   Catch
'     Debug "Error DataControl.getEQData"
'   
' End

Private Sub SetVolMaster(PercentVol As Integer)
  
  If PercentVol < 0 Or PercentVol > 100 Then Return
  Shell "pavol percent " & PercentVol & "%"
  DataControl.MasterVol = PercentVol
  Debug PercentVol
  
End

Private Function Volumen_Read() As Integer

  Return DataControl.MasterVol

End

Private Sub Volumen_Write(Value As Integer)

  SetVolMaster(Value)

End

Public Sub FwList()
  
  'Avanza la lista +10 pasos
  If NumberPos + 10 < DataControl.getTotalAlbums() Then
    NumberPos = NumberPos + 10
  Else
    NumberPos = 1
  Endif
  $CMain.NumberPos = NumberPos
  
End

Public Sub BkList()
  
  If NumberPos - 10 < DataControl.getTotalAlbums() And NumberPos - 10 > 0 Then
    NumberPos = NumberPos - 10
  Else If NumberPos - 10 > -9
    NumberPos = 1
  Else
    NumberPos = DataControl.getTotalAlbums() - 10
  Endif
  $CMain.NumberPos = NumberPos
  
End

Public Sub CancelSong()
  
  $CMain.CancelSong
  
End

Private Function Skm_Modo_Read() As String

  Return DataControl.Skm_Modo

End

Private Sub Skm_Modo_Write(Value As String)

  DataControl.Skm_Modo = Value
  $CMain.Skm_Modo = Value

End
